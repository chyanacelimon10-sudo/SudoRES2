name: Build SNES ROM

on: [push]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v4

    - name: Set up PVSnesLib environment
      run: |
        git clone https://github.com --recursive
        echo "SNES_HOME=$PWD/pvsneslib" >> $GITHUB_ENV
        sudo apt-get update
        sudo apt-get install -y build-essential flex bison libpng-dev

    - name: Compile the SNES project
      run: |
        cd pvsneslib/examples/hello_world
        make

    - name: Upload ROM artifact
      uses: actions/upload-artifact@v4
      with:
        name: DumbHouseOS_ROM
        path: pvsneslib/examples/hello_world/hello_world.sfc
        
